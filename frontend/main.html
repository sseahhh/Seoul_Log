<!DOCTYPE html>
<html class="light" lang="ko"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>SeoulLog - ì„œìš¸ì‹œì˜íšŒ AI ì •ë³´ ì„œë¹„ìŠ¤</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Public+Sans:wght@400;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
<script id="tailwind-config">
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#0052A4",
            "secondary": "#666666",
            "accent": "#FFB600",
            "background-light": "#F5F5F7",
            "background-dark": "#101622",
          },
          fontFamily: {
            "display": ["Public Sans", "Noto Sans KR", "sans-serif"]
          },
          borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
        },
      },
    }
  </script>
<style>
    .material-symbols-outlined {
      font-variation-settings:
      'FILL' 0,
      'wght' 400,
      'GRAD' 0,
      'opsz' 24
    }
  </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
<style>
    body {
      min-height: max(884px, 100dvh);
    }
  </style>
  </head>
<body class="font-display bg-background-light dark:bg-background-dark">
<div class="relative flex h-screen w-full flex-col group/design-root overflow-hidden mx-auto max-w-lg">
<div class="flex items-center justify-between bg-white dark:bg-gray-900 shadow-sm p-4">
<div class="text-[#111318] dark:text-white flex size-12 shrink-0 items-center justify-start">
<span class="material-symbols-outlined text-2xl">menu</span>
</div>
<h1 class="text-lg font-bold text-[#111318] dark:text-white leading-tight tracking-[-0.015em] flex-1 text-center">SeoulLog</h1>
<div class="flex w-12 items-center justify-end">
<button class="flex items-center justify-center rounded-lg h-12 text-[#111318] dark:text-white gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0">
<span class="material-symbols-outlined text-2xl">settings</span>
</button>
</div>
</div>
<main class="flex flex-1 flex-col overflow-y-auto bg-white dark:bg-gray-950">
<div class="p-6 pt-10 flex flex-col justify-center items-center text-center">
<h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2">ë¬´ì—‡ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”?</h2>
<p class="text-secondary dark:text-gray-400 mb-6">ì„œìš¸ì‹œì˜íšŒ ì•ˆê±´ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”.</p>
<div class="w-full relative">
<input class="w-full h-14 pl-12 pr-6 rounded-full border-2 border-primary focus:ring-2 focus:ring-primary/50 text-base" placeholder="í‚¤ì›Œë“œ ë˜ëŠ” ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”" type="text"/>
<span class="material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-primary">search</span>
</div>
<div class="flex flex-wrap justify-center gap-2 mt-4">
<button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm rounded-full">#ì²­ë…„ì£¼íƒ</button>
<button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm rounded-full">#êµí†µ</button>
<button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm rounded-full">#í™˜ê²½</button>
<button class="px-3 py-1.5 bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm rounded-full">#ë°˜ë ¤ë™ë¬¼</button>
</div>
</div>
<div class="flex-1 bg-background-light dark:bg-background-dark rounded-t-2xl p-4 pt-6 space-y-4">
<h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 px-2">ğŸ”¥ ì£¼ëª©ë°›ëŠ” ì•ˆê±´ Top 5</h3>
<div id="top-agendas-container" class="space-y-3">
<!-- Top ì•ˆê±´ì´ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
</div>
</div>
</main>
</div>
<script>
  // ê²€ìƒ‰ ê¸°ëŠ¥
  const searchInput = document.querySelector('input[placeholder="í‚¤ì›Œë“œ ë˜ëŠ” ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”"]');

  searchInput.addEventListener('keypress', async (e) => {
    if (e.key === 'Enter') {
      const query = searchInput.value.trim();
      if (query) {
        // ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©´ì„œ query íŒŒë¼ë¯¸í„° ì „ë‹¬
        window.location.href = `/search?query=${encodeURIComponent(query)}`;
      }
    }
  });

  // íƒœê·¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
  const tagButtons = document.querySelectorAll('button[class*="px-3 py-1.5"]');
  tagButtons.forEach(button => {
    button.addEventListener('click', () => {
      const tag = button.textContent.trim();
      searchInput.value = tag;
      window.location.href = `/search?query=${encodeURIComponent(tag)}`;
    });
  });

  // í˜ì´ì§€ ë¡œë“œ ì‹œ Top 5 ì•ˆê±´ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
  async function loadTopAgendas() {
    try {
      const response = await fetch('/api/top-agendas');
      const topAgendas = await response.json();

      const container = document.getElementById('top-agendas-container');
      container.innerHTML = ''; // ê¸°ì¡´ ë‚´ìš© ì œê±°

      topAgendas.forEach((agenda, index) => {
        const card = document.createElement('div');
        card.className = 'w-full cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-lg transition';
        card.dataset.agendaId = agenda.agenda_id; // agenda_id ì €ì¥

        card.innerHTML = `
          <div class="flex items-start justify-start rounded-lg shadow-[0_0_4px_rgba(0,0,0,0.1)] bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 p-4">
            <div class="flex items-center justify-center mr-4 text-primary font-bold text-xl w-6">${index + 1}</div>
            <div class="flex w-full min-w-0 grow flex-col items-stretch justify-center gap-1">
              <p class="text-[#111318] dark:text-white text-base font-bold leading-tight tracking-[-0.015em]">${agenda.title}</p>
              <div class="flex flex-col gap-1">
                <p class="text-secondary dark:text-gray-400 text-sm font-normal leading-normal">ğŸ“… ${agenda.meeting_date} | ğŸ“ ${agenda.meeting_title}</p>
                <p class="text-secondary dark:text-gray-400 text-sm font-normal leading-normal">ğŸ’¬ ${agenda.chunk_count}ê°œ ë°œì–¸ | ğŸ‘¤ ${agenda.main_speaker}</p>
                <p class="text-secondary dark:text-gray-400 text-sm font-normal leading-normal">ğŸ“Š ${agenda.status}</p>
                ${agenda.ai_summary && agenda.ai_summary !== 'ìš”ì•½ ì—†ìŒ' ? `<p class="text-gray-600 dark:text-gray-400 text-xs mt-1 line-clamp-2">${agenda.ai_summary}</p>` : ''}
              </div>
            </div>
          </div>
        `;

        // í´ë¦­ ì´ë²¤íŠ¸: details í˜ì´ì§€ë¡œ ì´ë™
        card.addEventListener('click', () => {
          window.location.href = `/details?agenda_id=${encodeURIComponent(agenda.agenda_id)}`;
        });

        container.appendChild(card);
      });

      console.log('Top 5 ì•ˆê±´ ë¡œë“œ ì™„ë£Œ:', topAgendas);
    } catch (error) {
      console.error('Top 5 ì•ˆê±´ ë¡œë“œ ì‹¤íŒ¨:', error);
      // ì—ëŸ¬ ì‹œ ë©”ì‹œì§€ í‘œì‹œ
      const container = document.getElementById('top-agendas-container');
      container.innerHTML = '<p class="text-center text-gray-500 dark:text-gray-400 py-4">ì•ˆê±´ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</p>';
    }
  }

  // í˜ì´ì§€ ë¡œë“œ ì‹œ Top 5 ì•ˆê±´ ë¡œë“œ
  loadTopAgendas();

  // loadHotIssues();
</script>
<!-- Floating Chatbot Button -->
<a href="/chat" class="fixed bottom-6 right-6 bg-primary text-white rounded-full p-4 shadow-lg hover:bg-primary/90 transition-transform hover:scale-110 z-30">
  <span class="material-symbols-outlined">
    question_answer
  </span>
</a>
</body></html>